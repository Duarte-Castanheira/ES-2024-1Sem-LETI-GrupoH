
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;

import java.io.File;
import java.io.FileWriter;
import java.io.IOException;

import static org.junit.jupiter.api.Assertions.*;

/**
 * Classe de teste para a classe `Ler_DataBase`, que verifica o comportamento
 * do método `ReadFile`.
 */


class Ler_DataBaseTest {

    File file = new File("test-temp.csv");

    /**
     * Configuração inicial antes de cada teste. Cria um arquivo CSV temporário com dados de teste.
     */

    @BeforeEach
    void setUp() {
        String conteudoTeste = """
                OBJECTID;PAR_ID;PAR_NUM;Shape_Length;Shape_Area;geometry;OWNER;Freguesia;Municipio;Ilha
                1;Terreno A;100;200;300;MULTIPOLYGON (((299218.5203999998 3623637.4791, 299218.5033999998 3623637.4715, 299218.04000000004 3623638.4800000004, 299232.7400000002 3623644.6799999997, 299236.6233999999 3623637.1974, 299236.93709999975 3623636.7885999996, 299238.04000000004 3623633.4800000004, 299222.63999999966 3623627.1799999997, 299218.5203999998 3623637.4791)));1;alcochete;Madeira;Ilha
                2;Terreno B;200;250;350;MULTIPOLYGON (((298584.82830000017 3623106.6208999995, 298584.8326000003 3623106.6209999993, 298584.8300000001 3623106.6500000004, 298582.5270999996 3623115.3680000007, 298582.00540000014 3623119.2994, 298582.0965999998 3623119.1777999997, 298588.6500000004 3623119.08, 298590.6457000002 3623111.5079999994, 298590.6503999997 3623111.5084000006, 298591.9299999997 3623106.6400000006, 298584.8300000001 3623106.619999999, 298584.82830000017 3623106.6208999995)));2;Samouco;Madeira;Ilha
                3;Terreno C;300;270;370;MULTIPOLYGON (((298598.2429999998 3621571.0775000006, 298599.9718000004 3621568.5, 298600.1853 3621568.0934999995, 298600.23429999966 3621568.109099999, 298600.51999999955 3621568.1999999993, 298601.1412000004 3621567.0265999995, 298601.6326000001 3621566.0985000003, 298605.9199999999 3621558, 298608.9199999999 3621539.4000000004, 298608.6607999997 3621535.058700001, 298608.1200000001 3621526, 298607.78809999954 3621514.2162999995, 298607.71999999974 3621511.8000000007, 298608.5378999999 3621501.9848999996, 298604.7098000003 3621500.5493, 298604.7039999999 3621500.3751, 298604.7028000001 3621500.3391999993, 298604.0982999997 3621500.2248, 298599.80090000015 3621499.411800001, 298599.4483000003 3621501.7940999996, 298595.8021 3621526.8505000006, 298593.9930999996 3621536.630000001, 298591.3967000004 3621550.6664000005, 298591.37229999993 3621550.7983999997, 298591.4299999997 3621550.9189999998, 298591.4567999998 3621550.9749, 298591.4106999999 3621550.9667000007, 298590.4199999999 3621554.880000001, 298586.1699999999 3621561.33, 298584.7814999996 3621563.036699999, 298598.2429999998 3621571.0775000006)));3;Montijo;Madeira;Ilha
                """;

        try (FileWriter writer = new FileWriter("test-temp.csv")) {
            writer.write(conteudoTeste);
        } catch (IOException e) {
            fail("Erro ao criar arquivo de teste: " + e.getMessage());
        }
    }

    /**
     * Testa o método `ReadFile` para verificar se ele processa corretamente um arquivo CSV.
     */

    @Test
    void ReadFile() {

        try {
            Ler_DataBase.ReadFile(file);
            assertTrue(true);
        } catch (Exception e) {
            fail("O método ReadFile lançou uma exceção: " + e.getMessage());
        }
    }


}